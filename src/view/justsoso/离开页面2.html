<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
  <title>nihao</title>
  <script>
    function getEvent() //同时兼容ie和ff的写法， 这个方法是网上copy的
    {
      if(document.all)   return window.event;
      func=getEvent.caller;
      while(func!=null){
        var arg0=func.arguments[0];
        if(arg0)
        {
          if((arg0.constructor==Event || arg0.constructor ==MouseEvent) || (typeof(arg0)=="object" && arg0.preventDefault && arg0.stopPropagation))
          {
            return arg0;
          }
        }
        func=func.caller;
      }
      return null;
    }
    function ConfirmClose() {
      if(window.event)
        window.event.returnValue = "在关闭窗口前确认您是否已经保存了信息！";
      else
        getEvent().preventDefault();//for firefox
    }
    function on_page_loaded()   //自己定义的body的onload事件　
    {
      try{
        if(!window.onbeforeunload )    //为了不覆盖原来的onbeforeunload方法，先判断
          window.onbeforeunload = ConfirmClose;   //todo 增加了窗口关闭前的提示 31.
      }catch(e){}
    }


  </script>
</head>
<body onload = on_page_loaded()>
</body>
</html>
